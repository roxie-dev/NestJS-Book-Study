# [2ì¥] ì›¹ ê°œë°œ ê¸°ì´ˆ ì§€ì‹

# 2.1 ì›¹ í”„ë ˆì„ì›Œí¬

- í”„ë ˆì„ì›Œí¬ëŠ” â€˜ë¼ˆëŒ€â€™, â€˜ê³¨ì¡°â€™ë¼ëŠ” ëœ»ìœ¼ë¡œ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” ë¼ˆëŒ€ë¥¼ ì„¸ìš°ê³  ì‚´ì„ ë¶™ì—¬ê°€ëŠ” ì‘ì—…ì„ í•œë‹¤.
- ì •í•´ì§„ ë°©ë²•ê³¼ ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤.
- ììœ ë„ê°€ ì œì•½ë˜ëŠ” ë°˜ë©´, ì‰½ê³  ë¹ ë¥´ê²Œ ì•ˆì •ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.

### í”„ë ˆì„ì›Œí¬ ì„ íƒ ì‹œ ê³ ë ¤ì‚¬í•­

`ê°œë°œë¬¸ì„œ` , `ì‚¬ìš©ì ìˆ˜` , `í™œì„± ì»¤ë®¤ë‹ˆí‹°` , `ê¹ƒí—ˆë¸Œ ìŠ¤íƒ€ ìˆ˜ì™€ ì´ìŠˆ ëŒ€ì‘`

# 2.2 Node.js

> **JavaScript everywhere ğŸ‰**

- Nestë¡œ ì‘ì„±í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ Expressë‚˜ Fastifyì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ ì½”ë“œë¡œ ì»´íŒŒì¼í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

## Node.jsì˜ ì—­ì‚¬

![Group 237618.png](/assets/Group_237618.png)

- 1995ë…„ ì´ì „ì—ëŠ” HTMLê³¼ CSSë§Œìœ¼ë¡œ ì›¹ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“œëŠ” ì‹œì ˆì´ ìˆì—ˆë‹¤.
- 1995ë…„ JavaScriptê°€ ë„ì…ë˜ë©´ì„œ ì—¬ëŸ¬ ë¸Œë¼ìš°ì €ë“¤ì´ JavaScript Engineì„ íƒ‘ì œí•˜ê¸° ì‹œì‘í•œë‹¤.
- 2008ë…„ í¬ë¡¬ì—ì„œ JIT(Just-in-time compilation)ë¥¼ ì§€ì›í•˜ëŠ” V8ì—”ì§„ì„ ë§Œë“¤ì—ˆë‹¤.
- 2009ë…„ `Ryan Dahl`ì´ Node.jsë¥¼ ê°œë°œí•˜ë©´ì„œ ì„¸ìƒì— ë‚˜íƒ€ë‚˜ê¸° ì‹œì‘í–ˆë‹¤.

### Node.jsì˜ íŠ¹ì§•

1. JavaScript Rungime
2. Single Thread
3. Non-Blocking I/O
4. Event-Driven

<aside>
ğŸ’¡

ë©”ì¸ ìŠ¤í„°ë””ëŠ” NextJSì´ë¯€ë¡œ, Node.jsì— ëŒ€í•´ì„œëŠ” ë”°ë¡œ ìŠ¤í„°ë””ë¥¼ ë§Œë“¤ì–´ì„œ ê³µë¶€í•  ì˜ˆì •.

</aside>

## 2.6 ë°ì»¤ë ˆì´í„°

- ë°ì»¤ë ˆì´í„°(decorator)ë¥¼ ì˜ ì‚¬ìš©í•˜ë©´ íš¡ë‹¨ ê´€ì‹¬ì‚¬(cross-cutting concern)ë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ ì ìš©í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤, ë©”ì„œë“œ, ì ‘ê·¼ì, í”„ë¡œí¼í‹°, ë§¤ê°œë³€ìˆ˜ì— ì ìš© ê°€ëŠ¥í•˜ë‹¤.
- ê° ìš”ì†Œì˜ ì„ ì–¸ë¶€ ì•ì— `@`ë¡œ ì‹œì‘í•˜ëŠ” ë°ì»¤ë ˆì´í„°ë¥¼ ì„ ì–¸í•˜ë©´ ë°ì»¤ë ˆì´í„°ë¡œ êµ¬í˜„ëœ ì½”ë“œë¥¼ í•¨ê»˜ ì‹¤í–‰í•œë‹¤.

```tsx
class CreateUserDto {
  @IsEmail() // ì´ë©”ì¼ í˜•ì‹ì„ ê°€ì§„ ë¬¸ìì—´
  @MaxLength(60) // ê¸¸ì´ëŠ” ìµœëŒ€ 60ì
  readonly email: string;

  @IsString() // ë¬¸ìì—´
  @Matches(/^[A-Za-z\d!@#$%^&*(]{8,30}$/) // ì£¼ì–´ì§„ ì •ê·œ í‘œí˜„ì‹ì— ì í•©í•œê°€
  readonly password: string;
}
```

- ì‚¬ìš©ìëŠ” ìš”ì²­ì„ ì˜ëª» ë³´ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°ì»¤ë ˆì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í—ˆìš©í•˜ëŠ” ê°’ìœ¼ë¡œ ì œëŒ€ë¡œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ì§€ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.
- tsconfig.json íŒŒì¼ì—ì„œ `"experimentalDecorators": true` ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

## â“ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•  ë•Œ ê¼­ `@` ê¸°í˜¸ë¥¼ ë„£ì–´ì•¼ í• ê¹Œ?

- TypeScript(ê·¸ë¦¬ê³  ECMAScript)ê°€ ì •í•œ ì•½ì†ìœ¼ë¡œ, **"ì´ ì½”ë“œê°€ ë°ì½”ë ˆì´í„°ë‹¤!"** ë¼ê³  ì•Œë ¤ì£¼ëŠ” **íŠ¹ë³„í•œ ë¬¸ë²•**ì´ë‹¤.
- ìì„¸í•œ ë‚´ìš©ì€ [ê³µì‹ë¬¸ì„œ](https://www.typescriptlang.org/ko/docs/handbook/decorators.html)ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

## ğŸ’© ë°ì½”ë ˆì´í„° ì—†ì´ ì§ì ‘ ì‘ì„±í•˜ëŠ” ì½”ë“œ

```tsx
// controller/cats.js
import { Request, Response } from "express";

class CatsController {
  getAllCats(req: Request, res: Response) {
    res.send("ëª¨ë“  ê³ ì–‘ì´ ì •ë³´!");
  }
}

// router/cats.js
const express = require("express");
const app = express();
const catsController = new CatsController();

app.get("/cats", (req, res) => catsController.getAllCats(req, res));
```

## ğŸŒŸ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œ ì½”ë“œ

```tsx
import { Controller } from "@nestjs/common";

@Controller("cats")
class CatsController {
  @Get() // @Controllerë¥¼ í†µí•´ ìë™ìœ¼ë¡œ /cats ë¼ìš°í„° ì„¤ì •
  getAllCats() {
    return "ëª¨ë“  ê³ ì–‘ì´ ì •ë³´!";
  }
}
```

1. `@Controller('cats')`ëŠ” **NestJSì—ê²Œ ì´ í´ë˜ìŠ¤ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ë¼ëŠ” ê±¸ ì•Œë¦¼.**
2. NestJSëŠ” **ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•´ì„œ, `CatsController`ê°€ íŠ¹ì •í•œ ê²½ë¡œ(`/cats`)ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¼ëŠ” ì •ë³´ë¥¼ ì €ì¥í•¨.**
3. NestJSê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ë•Œ, **ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ ì‹¤ì œ ë¼ìš°í„°ë¥¼ ì„¤ì •í•¨.**

### ë°ì»¤ë ˆì´í„° íŒ©í† ë¦¬

- ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜ì´ë‹¤.

```tsx
// ì¼ë°˜ ë°ì½”ë ˆì´í„°
function Praise(target: Function) {
  console.log(`${target.name} í•™ìƒì´ ì¹­ì°¬ì„ ë°›ì•˜ì–´ìš”! ğŸ‰`); // Student í•™ìƒì´ ì¹­ì°¬ì„ ë°›ì•˜ì–´ìš”! ğŸ‰
}

@Praise
class Student {}
```

```tsx
// ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ ì‚¬ìš©
function Praise(message: string) {
  return function (target: Function) {
    console.log(`${target.name} í•™ìƒì´ "${message}" ì¹­ì°¬ì„ ë°›ì•˜ì–´ìš”! ğŸ‰`);
  };
}

@Praise("ì°©í•œ í–‰ë™") // ğŸ† "ì°©í•œ í–‰ë™" ì¹­ì°¬!
class Student1 {}

@Praise("ê³µë¶€ ì—´ì‹¬íˆ") // ğŸ“š "ê³µë¶€ ì—´ì‹¬íˆ" ì¹­ì°¬!
class Student2 {}
```

## â“ ì–¸ì œ ì¼ë°˜ ë°ì½”ë ˆì´í„°ë¥¼ ì“°ê³ , ì–¸ì œ ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ë¥¼ ì¨ì•¼ í• ê¹Œ?

| êµ¬ë¶„               | ì¼ë°˜ ë°ì½”ë ˆì´í„° (`@ë°ì½”ë ˆì´í„°`)    | ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ (`@ë°ì½”ë ˆì´í„°(ê°’)`) |
| ------------------ | ---------------------------------- | ------------------------------------- |
| ì˜ˆì œ               | `@Controller()`                    | `@Get(':id')`                         |
| ê°’(ì¸ì) í•„ìš” ì—¬ë¶€ | âŒ ì—†ìŒ                            | âœ… ìˆìŒ                               |
| ë™ì‘ ë°©ì‹          | í•­ìƒ ê°™ì€ ê¸°ëŠ¥                     | ê°’ì— ë”°ë¼ ë™ì‘ì´ ë‹¬ë¼ì§               |
| ì—­í•                | í´ë˜ìŠ¤/ë©”ì„œë“œë¥¼ íŠ¹ì • ê¸°ëŠ¥ìœ¼ë¡œ ì§€ì • | ê°’ì„ ë°›ì•„ì„œ ê¸°ëŠ¥ì„ ë‹¤ë¥´ê²Œ ì„¤ì •        |

- **`@Get()`** ìì²´ëŠ” ì¼ë°˜ ë°ì½”ë ˆì´í„°ì§€ë§Œ, `@Get(':id')`ì²˜ëŸ¼ ê°’ì„ ë„£ìœ¼ë©´ ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ê°€ ëœë‹¤.

## 2.6.1 ë°ì»¤ë ˆì´í„° í•©ì„±

- ë°ì½”ë ˆì´í„° í•©ì„±(Decorator Composition)ì€ ì—¬ëŸ¬ ê°œì˜ ë°ì½”ë ˆì´í„°ë¥¼ ì¡°í•©í•´ì„œ ë™ì‹œì— ì ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í•˜ë‚˜ì˜ í•¨ìˆ˜, í´ë˜ìŠ¤, ë©”ì„œë“œì— ì—¬ëŸ¬ ê°œì˜ ë°ì½”ë ˆì´í„°ë¥¼ ê²¹ì³ì„œ ë¶™ì´ëŠ” ê²ƒì„ ë§í•œë‹¤.

```tsx
import { Controller, Get, UseGuards } from '@nestjs/common';

// ğŸ¨ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” ë°ì½”ë ˆì´í„°
function LogRequest(message: string) {
  return function (target: any, key: string, descriptor: PropertyDescriptor) {
    const originalMethod = descriptor.value;
    descriptor.value = function (...args: any[]) {
      console.log(`ğŸš€ ${message} ìš”ì²­ì´ ë“¤ì–´ì˜´!`);
      return originalMethod.apply(this, args);
    };
    return descriptor;
  };
}

// ğŸ¨ ì¸ì¦(ë¡œê·¸ì¸) ì²´í¬í•˜ëŠ” ë°ì½”ë ˆì´í„°
function AuthGuard() {
  return function (target: any, key: string, descriptor: PropertyDescriptor) {
    const originalMethod = descriptor.value;
    descriptor.value = function (...args: any[]) {
      console.log('ğŸ”‘ ì‚¬ìš©ì ì¸ì¦ í™•ì¸ ì¤‘...');
      return originalMethod.apply(this, args);
    };
    return descriptor;
  };
}

@Controller('users')
export class UserController {

  @Get()
  @LogRequest('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ') // ğŸš€ ìš”ì²­ ë¡œê·¸ ì°ê¸°
  @AuthGuard() // ğŸ”‘ ì¸ì¦ ì²´í¬í•˜ê¸°
  getAllUsers() {
    return 'ëª¨ë“  ì‚¬ìš©ì ëª©ë¡!';
  }

  @Get(':id')
  @LogRequest('íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ') // ğŸš€ ìš”ì²­ ë¡œê·¸ ì°ê¸°
  @AuthGuard() // ğŸ”‘ ì¸ì¦ ì²´í¬í•˜ê¸°
  getUserById() {
    return 'íŠ¹ì • ì‚¬ìš©ì ì •ë³´!';
  }
}

// ì¶œë ¥ ê²°ê³¼
ğŸ”‘ ì‚¬ìš©ì ì¸ì¦ í™•ì¸ ì¤‘...
ğŸš€ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ìš”ì²­ì´ ë“¤ì–´ì˜´!
```

### ì‹¤í–‰ ìˆœì„œ

- ë°ì½”ë ˆì´í„°ëŠ” "ì•„ë˜ì—ì„œ ìœ„ë¡œ" ì‹¤í–‰ëœë‹¤.

```tsx
  @Get()
  @LogRequest('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ') // (2) ì‹¤í–‰ë¨! (ë¡œê·¸ ì°ê¸°)
  @AuthGuard() // (1) ì‹¤í–‰ë¨! (ì¸ì¦ í™•ì¸)
  getAllUsers() {
    return 'ëª¨ë“  ì‚¬ìš©ì ëª©ë¡!';
  }
```

## ë°ì½”ë ˆì´í„° ìë™ í•©ì„±

```tsx
function AuthWithLogging(message: string) {
  return function (target: any, key: string, descriptor: PropertyDescriptor) {
    // âœ… ì¸ì¦ ì²´í¬ ë¨¼ì € ì‹¤í–‰
    AuthGuard()(target, key, descriptor);
    // âœ… ë¡œê·¸ ì°ê¸° ì‹¤í–‰
    LogRequest(message)(target, key, descriptor);
    return descriptor;
  };
}

@Controller("users")
export class UserController {
  @Get()
  @AuthWithLogging("ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ") // âœ… í•œ ë²ˆì— ì¸ì¦ + ë¡œê·¸ ì°ê¸°!
  getAllUsers() {
    return "ëª¨ë“  ì‚¬ìš©ì ëª©ë¡!";
  }

  @Get(":id")
  @AuthWithLogging("íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ") // âœ… í•œ ë²ˆì— ì¸ì¦ + ë¡œê·¸ ì°ê¸°!
  getUserById() {
    return "íŠ¹ì • ì‚¬ìš©ì ì •ë³´!";
  }
}
```

## ğŸ¯ **ì •ë¦¬: ë°ì½”ë ˆì´í„° í•©ì„± ê°œë… í•œëˆˆì— ë³´ê¸°!**

| ê°œë…                | ì„¤ëª…                               | ì˜ˆì œ                               |
| ------------------- | ---------------------------------- | ---------------------------------- |
| **ë°ì½”ë ˆì´í„° í•©ì„±** | ì—¬ëŸ¬ ê°œì˜ ë°ì½”ë ˆì´í„°ë¥¼ ë™ì‹œì— ì‚¬ìš© | `@AuthGuard() @LogRequest('ë¡œê·¸')` |
| **ì‹¤í–‰ ìˆœì„œ**       | "ì•„ë˜ì—ì„œ ìœ„ë¡œ" ì‹¤í–‰ë¨             | `@A() @B() â†’ B() ì‹¤í–‰ í›„ A() ì‹¤í–‰` |
| **ìë™ í•©ì„±**       | ì—¬ëŸ¬ ê°œì˜ ë°ì½”ë ˆì´í„°ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ê¸° | `@AuthWithLogging('ë¡œê·¸')`         |

---

## 2.6.2. í´ë˜ìŠ¤ ë°ì»¤ë ˆì´í„°

- í´ë˜ìŠ¤ ë°ì»¤ë ˆì´í„°(class decorator)ëŠ” í´ë˜ìŠ¤ ë°”ë¡œ ì•ì— ì„ ì–¸ëœë‹¤.
- í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ì ìš©ë˜ì–´ í´ë˜ìŠ¤ ì •ì˜ë¥¼ ì½ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
- ì„ ì–¸ íŒŒì¼ê³¼ ì„ ì–¸ í´ë˜ìŠ¤ ë‚´ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

### @Injectable

- NestJSì—ì„œëŠ” @Injectable()ì„ ì‚¬ìš©í•˜ë©´ NestJSê°€ ì•Œì•„ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•œë‹¤.
- ë‚´ë¶€ì ìœ¼ë¡œ `Reflect.defineMetadata()`ë¥¼ ì´ìš©í•´ í´ë˜ìŠ¤ë¥¼ NestJS DI ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤.

```tsx
import { Injectable } from "@nestjs/common";

@Injectable() // NestJS DI ì»¨í…Œì´ë„ˆì— ë“±ë¡ë¨!
class CatsService {
  getCats() {
    return ["ê³ ì–‘ì´1", "ê³ ì–‘ì´2"];
  }
}

import { Controller, Get } from "@nestjs/common";

@Controller("cats")
class CatsController {
  constructor(private readonly catsService: CatsService) {} // DI ì»¨í…Œì´ë„ˆì—ì„œ ìë™ìœ¼ë¡œ ì£¼ì…ë¨!

  @Get()
  getAllCats() {
    return this.catsService.getCats();
  }
}
```

- CatsServiceê°€ NestJSì˜ DI ì»¨í…Œì´ë„ˆì— ë“±ë¡ë˜ì–´ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì£¼ì…í•˜ê¸° ë•Œë¬¸ì—
  CatsControllerì—ì„œ `new CatsService()`ë¥¼ ì§ì ‘ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤.

### @Module

<p align="center">
<img width="210" height="210" src="../../assets/Group_237619.png" >
</p>

<br/>

- ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤ ë“±ì„ í•˜ë‚˜ì˜ ëª¨ë“ˆë¡œ ê·¸ë£¹í™”í•  ìˆ˜ ìˆë‹¤.
- @Module() ë°ì½”ë ˆì´í„°ëŠ” NestJS DI ì»¨í…Œì´ë„ˆì— ë“±ë¡ë˜ë©°, `controllers`ì— ë“±ë¡ëœ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì„ NestJSê°€ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ì—¬ API ë¼ìš°íŒ…ì„ ì„¤ì • í•œë‹¤.
- `providers`ì— ë“±ë¡ëœ ì„œë¹„ìŠ¤ë“¤ì„ ì˜ì¡´ì„± ì£¼ì…(DI) ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤.

```tsx
import { Module } from "@nestjs/common";
import { CatsController } from "./cats.controller";
import { CatsService } from "./cats.service";

// NestJSì—ê²Œ ì´ íŒŒì¼ì´ í•˜ë‚˜ì˜ ëª¨ë“ˆì´ë¼ëŠ” ê±¸ ì•Œë ¤ì¤Œ.
@Module({
  controllers: [CatsController], // ì»¨íŠ¸ë¡¤ëŸ¬ ë“±ë¡
  providers: [CatsService], // ì„œë¹„ìŠ¤ ë“±ë¡
})
export class CatsModule {} // í•˜ë‚˜ì˜ ëª¨ë“ˆë¡œ ê·¸ë£¹í™”
```

## 2.6.3 ë©”ì„œë“œ ë°ì»¤ë ˆì´í„°

- ë©”ì„œë“œ ë°ì½”ë ˆì´í„°(Method Decorator)ëŠ” í´ë˜ìŠ¤ì˜ íŠ¹ì • ë©”ì„œë“œì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ì—­í• ì„ í•˜ë©°`@Get()`, `@Post()`, `@Put()`, `@Delete()` ê°™ì€ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

### **ğŸš€ ì •ë¦¬: ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ì˜ 3ê°€ì§€ ì¸ìˆ˜**

| ì¸ìˆ˜          | ì„¤ëª…                                | ì˜ˆì œ                                                        |
| ------------- | ----------------------------------- | ----------------------------------------------------------- |
| `target`      | ë©”ì„œë“œê°€ ì†í•œ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…   | `CatsController.prototype`                                  |
| `propertyKey` | ë©”ì„œë“œ ì´ë¦„                         | `'getAllCats'`                                              |
| `descriptor`  | ë©”ì„œë“œ ì†ì„± (í•¨ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŒ) | `{ value: [Function], writable: true, configurable: true }` |

### `@Get()`ì€ ë‚´ë¶€ë™ì‘ ë°©ì‹

1. NestJSëŠ” `@Get()`ì„ ì‚¬ìš©í•œ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ Express.js ë˜ëŠ” Fastifyì˜ ë¼ìš°í„°ì— ë“±ë¡ í•œë‹¤.
2. ë°ì½”ë ˆì´í„°ëŠ” `Reflect.defineMetadata()`ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì„œë“œì— GET ìš”ì²­ì´ë¼ëŠ” ì •ë³´ë¥¼ ì €ì¥ í•œë‹¤.

```tsx
function CustomGet(path: string) {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    Reflect.defineMetadata("route:path", path, target, propertyKey);
    Reflect.defineMetadata("route:method", "GET", target, propertyKey);
  };
}

class CatsController {
  @CustomGet("/cats")
  getAllCats() {
    return "ëª¨ë“  ê³ ì–‘ì´ ì •ë³´!";
  }
}

console.log(
  Reflect.getMetadata("route:path", CatsController.prototype, "getAllCats")
); // '/cats'
console.log(
  Reflect.getMetadata("route:method", CatsController.prototype, "getAllCats")
); // 'GET'
```

- `@Get()` ë°ì½”ë ˆì´í„°ëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•´ì„œ NestJSê°€ ì´ ë©”ì„œë“œê°€ GET ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ í•œë‹¤.

1. NestJSê°€ ì‹¤í–‰ë  ë•Œ, ëª¨ë“  `@Get()` ë©”ì„œë“œë¥¼ ì°¾ì•„ì„œ HTTP ì„œë²„ì— ë“±ë¡í•œë‹¤.

```tsx
const controllers = [CatsController]; // ë“±ë¡ëœ ì»¨íŠ¸ë¡¤ëŸ¬ ëª©ë¡

controllers.forEach((controller) => {
  const prototype = controller.prototype;
  Object.getOwnPropertyNames(prototype).forEach((method) => {
    const path = Reflect.getMetadata("route:path", prototype, method);
    const httpMethod = Reflect.getMetadata("route:method", prototype, method);

    if (path && httpMethod === "GET") {
      console.log(`âœ… GET ìš”ì²­ ë“±ë¡ë¨: ${path} â†’ ${method}()`);
    }
  });
});
```

- `Reflect.getMetadata()`ë¥¼ ì‚¬ìš©í•´ `route:path`ì™€ `route:method`ë¥¼ í™•ì¸
- `httpMethod === 'GET'`ì´ë©´ Express/Fastify ë¼ìš°íŒ… ì‹œìŠ¤í…œì— ë“±ë¡

## **ğŸ”¥ ì •ë¦¬: ë°ì½”ë ˆì´í„°ì˜ ì¢…ë¥˜ì™€ ì‚¬ìš©ë²•**

| ë°ì½”ë ˆì´í„°   | ì„¤ëª…                        | ì ìš© ëŒ€ìƒ         | ì¸ìˆ˜                                    |
| ------------ | --------------------------- | ----------------- | --------------------------------------- |
| **í´ë˜ìŠ¤**   | í´ë˜ìŠ¤ë¥¼ ê°ì‹¸ì„œ ë™ì‘ì„ ì¶”ê°€ | í´ë˜ìŠ¤            | `(target: Function)`                    |
| **ë©”ì„œë“œ**   | íŠ¹ì • ë©”ì„œë“œì˜ ë™ì‘ì„ ë³€ê²½   | ë©”ì„œë“œ            | `(target, propertyKey, descriptor)`     |
| **ì ‘ê·¼ì**   | Getter/Setter ê°ì‹¸ê¸°        | Getter, Setter    | `(target, propertyKey, descriptor)`     |
| **ì†ì„±**     | ì†ì„±ì— ë©”íƒ€ë°ì´í„° ì¶”ê°€      | í´ë˜ìŠ¤ ì†ì„±(í•„ë“œ) | `(target, propertyKey)`                 |
| **ë§¤ê°œë³€ìˆ˜** | ë§¤ê°œë³€ìˆ˜ ê°’ ê²€ì‚¬            | ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ | `(target, propertyKey, parameterIndex)` |
