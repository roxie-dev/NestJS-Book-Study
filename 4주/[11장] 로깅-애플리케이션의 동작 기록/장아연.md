## ë¡œê¹… ì‹œìŠ¤í…œ ë™ì‘ ì œì–´

- ë¡œê¹… ë¹„í™œì„±í™”
- ë¡œê·¸ ë ˆë²¨ ì§€ì •: log, error, warn, debug, verbose
- ë¡œê±°ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ ì¬ì •ì˜
- ê¸°ë³¸ ë¡œê±° ì¬ì •ì˜
- ê¸°ë³¸ ë¡œê±° í™•ì¥ì„ í†µí•œ ì»¤ìŠ¤í…€ ë¡œê±°
- ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ ë¡œê±° ì£¼ì… ë° í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì œê³µ

## ë‚´ì¥ ë¡œê±°

- ë‚´ì¥ ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•˜ì—¬ ì‚¬ìš©

```
import { Injectable, Logger } from '@nestjs/common';

@Injectable()
export class AppService {
  // ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ í´ë˜ìŠ¤ëª…ì„ ì»¨í…ìŠ¤íŠ¸ë¡œ ì„¤ì •í•˜ì—¬ ë¡œê·¸ ë©”ì‹œì§€ ì•ì— í´ë˜ìŠ¤ëª…ì´ í•¨ê»˜ ì¶œë ¥ë˜ë„ë¡ í•¨.
  private readonly logger = new Logger(AppService.name);
  getHello(): string {
    this.logger.error('this is error');
    this.logger.warn('this is warn');
    this.logger.log('this is log');
    this.logger.verbose('this is verbose');
    this.logger.debug('this is debug');

    return 'Hello World!';
  }
}
```

### ë¡œê¹… ë¹„í™œì„±í™”

- logger ì˜µì…˜ì„ falseë¡œ ì„¤ì •í•´ ë¡œê·¸ ì¶œë ¥ë˜ì§€ ì•Šë„ë¡ í•¨

```
async function bootstrap() {
  //const app = await NestFactory.create(AppModule);
  // ë¡œê·¸ ë¹„í™œì„±í™”
  const app = await NestFactory.create(AppModule, {
    logger: false,
  });
  await app.listen(3000);
}
```

### ë¡œê·¸ ë ˆë²¨ ì§€ì •

- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” debug ë¡œê·¸ ë‚¨ì§€ ì•Šë„ë¡ ë™ì ìœ¼ë¡œ ì§€ì •í•¨

```
async function bootstrap() {
  //const app = await NestFactory.create(AppModule);
  // ë¡œê·¸ ë¹„í™œì„±í™”
  const app = await NestFactory.create(AppModule, {
    logger:
      process.env.NODE_ENV === "prod" ? ["error", "warn", "log"] : ["debug"],
  });
  await app.listen(3000);
}
```

### ğŸ§¾ ì„¤ì • ê°€ëŠ¥í•œ ì˜µì…˜ ì •ë¦¬

| ì˜µì…˜              | ì„¤ëª…                         | ê¸°ë³¸ê°’                                         |
| ----------------- | ---------------------------- | ---------------------------------------------- |
| `logLevels`       | í™œì„±í™”í•  ë¡œê·¸ ë ˆë²¨ ë°°ì—´      | `['log', 'error', 'warn', 'debug', 'verbose']` |
| `timestamp`       | ì´ì „ ë¡œê·¸ì™€ì˜ ì‹œê°„ ì°¨ ì¶œë ¥   | `false`                                        |
| `prefix`          | ë¡œê·¸ ë©”ì‹œì§€ ì•ì— ë¶™ì¼ ë¬¸ìì—´ | `'Nest'`                                       |
| `json`            | JSON í¬ë§· ë¡œê·¸ ì¶œë ¥ ì—¬ë¶€     | `false`                                        |
| `colors`          | ì»¬ëŸ¬ ì¶œë ¥ ì‚¬ìš© ì—¬ë¶€          | `true`                                         |
| `context`         | ë¡œê·¸ ì»¨í…ìŠ¤íŠ¸ ëª…ì‹œ           | `undefined`                                    |
| `compact`         | ë¡œê·¸ë¥¼ í•œ ì¤„ë¡œ ì¶œë ¥          | `true`                                         |
| `maxArrayLength`  | ë°°ì—´ ì¶œë ¥ ìµœëŒ€ ê°œìˆ˜          | `100`                                          |
| `maxStringLength` | ë¬¸ìì—´ ì¶œë ¥ ìµœëŒ€ ê¸¸ì´        | `10000`                                        |
| `sorted`          | ê°ì²´ ì†ì„± ì •ë ¬ ì—¬ë¶€          | `false`                                        |
| `depth`           | ê°ì²´ ì¶œë ¥ ê¹Šì´               | `5`                                            |
| `showHidden`      | ìˆ¨ê²¨ì§„ ì†ì„± ì¶œë ¥ ì—¬ë¶€        | `false`                                        |
| `breakLength`     | ì¤„ ë°”ê¿ˆ ê¸°ì¤€ ê¸¸ì´            | `Infinity`                                     |

## ì»¤ìŠ¤í…€ ë¡œê±°

- ë‚´ì¥ ë¡œê±°ëŠ” ë¡œê·¸ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠìŒ
- ì»¤ìŠ¤í…€ ë¡œê±°ëŠ” LoggerService ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨

```
export interface LoggerService {
    log(message: any, ...optionalParams: any[]): any;
    error(message: any, ...optionalParams: any[]): any;
    warn(message: any, ...optionalParams: any[]): any;
    debug?(message: any, ...optionalParams: any[]): any;
    verbose?(message: any, ...optionalParams: any[]): any;
    setLogLevels?(levels: LogLevel[]): any;
}
```

ì˜ˆì œ) ì»¤ìŠ¤í…€ ë¡œê±° ë§Œë“¤ê¸°

```
import { LoggerService } from '@nestjs/common';

export class MyloggerService implements LoggerService {
  debug(message: any, ...optionalParams: any[]): any {
    console.log(message);
  }

  error(message: any, ...optionalParams: any[]): any {
    console.log(message);
    this.doSomething();
  }

  private doSomething() {
    // DB ì €ì¥ê³¼ ê°™ì€ ë¶€ê°€ ë¡œì§ ì¶”ê°€
  }

  log(message: any, ...optionalParams: any[]): any {
    console.log(message);
  }

  verbose(message: any, ...optionalParams: any[]): any {
    console.log(message);
  }

  warn(message: any, ...optionalParams: any[]): any {
    console.log(message);
  }
}
```

### ì»¤ìŠ¤í…€ ë¡œê±° ì£¼ì…

- ë¡œê±°ë¥¼ ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ì„œ ìƒì„±ìì—ì„œ ì£¼ì…í•´ ì‚¬ìš©í•¨
- LoggerModuleì„ ë§Œë“¤ê³  AppModuleì— ê°€ì§€ê³  ì˜´

```
import { Module } from "@nestjs/common";
import { MyloggerService } from "./mylogger.service";

@Module({
  providers: [MyloggerService],
  exports: [MyloggerService],
})
export class LoggerModule {}
```

```
import { LoggerModule } from './logging/logger.module';

@Module({
  imports: [LoggerModule],
  ...
})
export class AppModule {}
```

- í”„ë¡œë°”ì´ë”ë¡œ MyLoggerë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©

```
import { Injectable } from '@nestjs/common';
import { MyloggerService } from './logging/mylogger.service';

@Injectable()
export class AppService {
  constructor(private myLogger: MyloggerService) {}

  getHello(): string {
    this.myLogger.error('test');

    return 'Hello World!';
  }
}
```

### 2.2 ì»¤ìŠ¤í…€ ë¡œê±° ì „ì—­ ì‚¬ìš©

main.ts

```
    import { NestFactory } from "@nestjs/core";
    import { AppModule } from "./app.module";
    import { MyloggerService } from "./logging/mylogger.service";

    async function bootstrap() {
    const app = await NestFactory.create(AppModule);
    app.useLogger(app.get(MyloggerService));
    await app.listen(3000);
    }
    bootstrap();
```
